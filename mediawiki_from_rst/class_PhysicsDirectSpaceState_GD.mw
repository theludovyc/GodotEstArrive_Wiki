__NOTOC__'''Inherits:''' [[Object GD|Object]]Direct access object to a space in the [[PhysicsServer GD|PhysicsServer]].== Description ==Direct access object to a space in the [[PhysicsServer GD|PhysicsServer]]. It's used mainly to do queries against objects and areas residing in a given space.== Tutorials ==*  :doc:`../tutorials/physics/ray-casting`== Methods =={| class="wikitable | [[Array GD|Array]]|| [[#cast_motion|cast_motion]] '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape, [[Vector3 GD|Vector3]] motion ''')'''                                                                                                                                                     |-| [[Array GD|Array]]|| [[#collide_shape|collide_shape]] '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape, int max_results=32 ''')'''                                                                                                                                                 |-| [[Dictionary GD|Dictionary]]|| [[#get_rest_info|get_rest_info]] '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape ''')'''                                                                                                                                                                                       |-| [[Dictionary GD|Dictionary]]|| [[#intersect_ray|intersect_ray]] '''(''' [[Vector3 GD|Vector3]] from, [[Vector3 GD|Vector3]] to, [[Array GD|Array]] exclude=[  ], int collision_mask=2147483647, bool collide_with_bodies=true, bool collide_with_areas=false ''')''' |-| [[Array GD|Array]]|| [[#intersect_shape|intersect_shape]] '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape, int max_results=32 ''')'''                                                                                                                                             |}== Method Descriptions ===== cast_motion ===*  [[Array GD|Array]] '''cast_motion''' '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape, [[Vector3 GD|Vector3]] motion ''')'''Checks whether the shape can travel to a point. The method will return an array with two floats between 0 and 1, both representing a fraction of {{Span|motion}}. The first is how far the shape can move without triggering a collision, and the second is the point at which a collision will occur. If no collision is detected, the returned array will be {{Span|[1, 1]}}.If the shape can not move, the returned array will be {{Span|[0, 0]}} under Bullet, and empty under GodotPhysics.=== collide_shape ===*  [[Array GD|Array]] '''collide_shape''' '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape, int max_results=32 ''')'''Checks the intersections of a shape, given through a [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] object, against the space. The resulting array contains a list of points where the shape intersects another. Like with [[#intersect_shape|intersect_shape]], the number of returned results can be limited to save processing time.=== get_rest_info ===*  [[Dictionary GD|Dictionary]] '''get_rest_info''' '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape ''')'''Checks the intersections of a shape, given through a [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] object, against the space. If it collides with more than one shape, the nearest one is selected. The returned object is a dictionary containing the following fields:{{Span|collider_id}}: The colliding object's ID.{{Span|linear_velocity}}: The colliding object's velocity [[Vector3 GD|Vector3]]. If the object is an [[Area GD|Area]], the result is {{Span|(0, 0, 0)}}.{{Span|normal}}: The object's surface normal at the intersection point.{{Span|point}}: The intersection point.{{Span|rid}}: The intersecting object's [[RID GD|RID]].{{Span|shape}}: The shape index of the colliding shape.If the shape did not intersect anything, then an empty dictionary is returned instead.=== intersect_ray ===*  [[Dictionary GD|Dictionary]] '''intersect_ray''' '''(''' [[Vector3 GD|Vector3]] from, [[Vector3 GD|Vector3]] to, [[Array GD|Array]] exclude=[  ], int collision_mask=2147483647, bool collide_with_bodies=true, bool collide_with_areas=false ''')'''Intersects a ray in a given space. The returned object is a dictionary with the following fields:{{Span|collider}}: The colliding object.{{Span|collider_id}}: The colliding object's ID.{{Span|normal}}: The object's surface normal at the intersection point.{{Span|position}}: The intersection point.{{Span|rid}}: The intersecting object's [[RID GD|RID]].{{Span|shape}}: The shape index of the colliding shape.If the ray did not intersect anything, then an empty dictionary is returned instead.Additionally, the method can take an {{Span|exclude}} array of objects or [[RID GD|RID]]\ s that are to be excluded from collisions, a {{Span|collision_mask}} bitmask representing the physics layers to check in, or booleans to determine if the ray should collide with [[PhysicsBody GD|PhysicsBody]]\ s or [[Area GD|Area]]\ s, respectively.=== intersect_shape ===*  [[Array GD|Array]] '''intersect_shape''' '''(''' [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] shape, int max_results=32 ''')'''Checks the intersections of a shape, given through a [[PhysicsShapeQueryParameters GD|PhysicsShapeQueryParameters]] object, against the space. The intersected shapes are returned in an array containing dictionaries with the following fields:{{Span|collider}}: The colliding object.{{Span|collider_id}}: The colliding object's ID.{{Span|rid}}: The intersecting object's [[RID GD|RID]].{{Span|shape}}: The shape index of the colliding shape.The number of intersections can be limited with the {{Span|max_results}} parameter, to reduce the processing time.