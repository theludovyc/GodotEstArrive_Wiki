__NOTOC__'''Inherits:''' [[AnimationRootNode GD|AnimationRootNode]] '''<''' [[AnimationNode GD|AnimationNode]] '''<''' [[Resource GD|Resource]] '''<''' [[Reference GD|Reference]] '''<''' [[Object GD|Object]]State machine for control of animations.== Description ==Contains multiple nodes representing animation states, connected in a graph. Node transitions can be configured to happen automatically or via code, using a shortest-path algorithm. Retrieve the [[AnimationNodeStateMachinePlayback GD|AnimationNodeStateMachinePlayback]] object from the [[AnimationTree GD|AnimationTree]] node to control it programmatically.'''Example:'''::    var state_machine = $AnimationTree.get("parameters/playback")    state_machine.travel("some_state")== Tutorials ==*  :doc:`../tutorials/animation/animation_tree`== Methods =={| class="wikitable | void|| [[#add_node|add_node]] '''(''' [[StringName GD|StringName]] name, [[AnimationNode GD|AnimationNode]] node, [[Vector2 GD|Vector2]] position=Vector2( 0, 0 ) ''')'''                                               |-| void|| [[#add_transition|add_transition]] '''(''' [[StringName GD|StringName]] from, [[StringName GD|StringName]] to, [[AnimationNodeStateMachineTransition GD|AnimationNodeStateMachineTransition]] transition ''')''' |-| [[String GD|String]]|| [[#get_end_node|get_end_node]] '''(''' ''')''' const                                                                                                                                                                                  |-| [[Vector2 GD|Vector2]]|| [[#get_graph_offset|get_graph_offset]] '''(''' ''')''' const                                                                                                                                                                          |-| [[AnimationNode GD|AnimationNode]]|| [[#get_node|get_node]] '''(''' [[StringName GD|StringName]] name ''')''' const                                                                                                                                                 |-| [[StringName GD|StringName]]|| [[#get_node_name|get_node_name]] '''(''' [[AnimationNode GD|AnimationNode]] node ''')''' const                                                                                                                                 |-| [[Vector2 GD|Vector2]]|| [[#get_node_position|get_node_position]] '''(''' [[StringName GD|StringName]] name ''')''' const                                                                                                                               |-| [[String GD|String]]|| [[#get_start_node|get_start_node]] '''(''' ''')''' const                                                                                                                                                                              |-| [[AnimationNodeStateMachineTransition GD|AnimationNodeStateMachineTransition]]|| [[#get_transition|get_transition]] '''(''' int idx ''')''' const                                                                                                                                                    |-| int|| [[#get_transition_count|get_transition_count]] '''(''' ''')''' const                                                                                                                                                                  |-| [[StringName GD|StringName]]|| [[#get_transition_from|get_transition_from]] '''(''' int idx ''')''' const                                                                                                                                          |-| [[StringName GD|StringName]]|| [[#get_transition_to|get_transition_to]] '''(''' int idx ''')''' const                                                                                                                                              |-| bool|| [[#has_node|has_node]] '''(''' [[StringName GD|StringName]] name ''')''' const                                                                                                                                                 |-| bool|| [[#has_transition|has_transition]] '''(''' [[StringName GD|StringName]] from, [[StringName GD|StringName]] to ''')''' const                                                                                             |-| void|| [[#remove_node|remove_node]] '''(''' [[StringName GD|StringName]] name ''')'''                                                                                                                                                 |-| void|| [[#remove_transition|remove_transition]] '''(''' [[StringName GD|StringName]] from, [[StringName GD|StringName]] to ''')'''                                                                                             |-| void|| [[#remove_transition_by_index|remove_transition_by_index]] '''(''' int idx ''')'''                                                                                                                                  |-| void|| [[#rename_node|rename_node]] '''(''' [[StringName GD|StringName]] name, [[StringName GD|StringName]] new_name ''')'''                                                                                                   |-| void|| [[#replace_node|replace_node]] '''(''' [[StringName GD|StringName]] name, [[AnimationNode GD|AnimationNode]] node ''')'''                                                                                               |-| void|| [[#set_end_node|set_end_node]] '''(''' [[StringName GD|StringName]] name ''')'''                                                                                                                                               |-| void|| [[#set_graph_offset|set_graph_offset]] '''(''' [[Vector2 GD|Vector2]] offset ''')'''                                                                                                                                           |-| void|| [[#set_node_position|set_node_position]] '''(''' [[StringName GD|StringName]] name, [[Vector2 GD|Vector2]] position ''')'''                                                                                             |-| void|| [[#set_start_node|set_start_node]] '''(''' [[StringName GD|StringName]] name ''')'''                                                                                                                                           |}== Method Descriptions ===== add_node ===*  void '''add_node''' '''(''' [[StringName GD|StringName]] name, [[AnimationNode GD|AnimationNode]] node, [[Vector2 GD|Vector2]] position=Vector2( 0, 0 ) ''')'''Adds a new node to the graph. The {{Span|position}} is used for display in the editor.=== add_transition ===*  void '''add_transition''' '''(''' [[StringName GD|StringName]] from, [[StringName GD|StringName]] to, [[AnimationNodeStateMachineTransition GD|AnimationNodeStateMachineTransition]] transition ''')'''Adds a transition between the given nodes.=== get_end_node ===*  [[String GD|String]] '''get_end_node ( )''' constReturns the graph's end node.=== get_graph_offset ===*  [[Vector2 GD|Vector2]] '''get_graph_offset ( )''' constReturns the draw offset of the graph. Used for display in the editor.=== get_node ===*  [[AnimationNode GD|AnimationNode]] '''get_node''' '''(''' [[StringName GD|StringName]] name ''')''' constReturns the animation node with the given name.=== get_node_name ===*  [[StringName GD|StringName]] '''get_node_name''' '''(''' [[AnimationNode GD|AnimationNode]] node ''')''' constReturns the given animation node's name.=== get_node_position ===*  [[Vector2 GD|Vector2]] '''get_node_position''' '''(''' [[StringName GD|StringName]] name ''')''' constReturns the given node's coordinates. Used for display in the editor.=== get_start_node ===*  [[String GD|String]] '''get_start_node ( )''' constReturns the graph's end node.=== get_transition ===*  [[AnimationNodeStateMachineTransition GD|AnimationNodeStateMachineTransition]] '''get_transition''' '''(''' int idx ''')''' constReturns the given transition.=== get_transition_count ===*  int '''get_transition_count ( )''' constReturns the number of connections in the graph.=== get_transition_from ===*  [[StringName GD|StringName]] '''get_transition_from''' '''(''' int idx ''')''' constReturns the given transition's start node.=== get_transition_to ===*  [[StringName GD|StringName]] '''get_transition_to''' '''(''' int idx ''')''' constReturns the given transition's end node.=== has_node ===*  bool '''has_node''' '''(''' [[StringName GD|StringName]] name ''')''' constReturns {{Span|true}} if the graph contains the given node.=== has_transition ===*  bool '''has_transition''' '''(''' [[StringName GD|StringName]] from, [[StringName GD|StringName]] to ''')''' constReturns {{Span|true}} if there is a transition between the given nodes.=== remove_node ===*  void '''remove_node''' '''(''' [[StringName GD|StringName]] name ''')'''Deletes the given node from the graph.=== remove_transition ===*  void '''remove_transition''' '''(''' [[StringName GD|StringName]] from, [[StringName GD|StringName]] to ''')'''Deletes the transition between the two specified nodes.=== remove_transition_by_index ===*  void '''remove_transition_by_index''' '''(''' int idx ''')'''Deletes the given transition by index.=== rename_node ===*  void '''rename_node''' '''(''' [[StringName GD|StringName]] name, [[StringName GD|StringName]] new_name ''')'''Renames the given node.=== replace_node ===*  void '''replace_node''' '''(''' [[StringName GD|StringName]] name, [[AnimationNode GD|AnimationNode]] node ''')'''=== set_end_node ===*  void '''set_end_node''' '''(''' [[StringName GD|StringName]] name ''')'''Sets the given node as the graph end point.=== set_graph_offset ===*  void '''set_graph_offset''' '''(''' [[Vector2 GD|Vector2]] offset ''')'''Sets the draw offset of the graph. Used for display in the editor.=== set_node_position ===*  void '''set_node_position''' '''(''' [[StringName GD|StringName]] name, [[Vector2 GD|Vector2]] position ''')'''Sets the node's coordinates. Used for display in the editor.=== set_start_node ===*  void '''set_start_node''' '''(''' [[StringName GD|StringName]] name ''')'''Sets the given node as the graph start point.